<chao:BaseWindow
    x:Class="SuperRename.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:chao="https://gitee.com/secret/chao-controls"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:SuperRename"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="SuperRename-超级重命名工具"
    Width="800"
    Height="450"
    Background="#1E1E1E"
    Foreground="White"
    Icon="/Resources/logo.ico"
    TitleAlign="Left"
    TitleMargin="0"
    WindowStartupLocation="CenterScreen"
    mc:Ignorable="d">

    <chao:BaseWindow.Resources>

        <Style
            x:Key="CommonButton"
            BasedOn="{StaticResource FillButton}"
            TargetType="Button">
            <Setter Property="Width" Value="100" />
            <Setter Property="Height" Value="30" />
            <Setter Property="Background" Value="#409EFF" />
        </Style>

        <Style x:Key="HoverSpliter" TargetType="GridSplitter">
            <Setter Property="Background" Value="Gray" />
            <Setter Property="Margin" Value="0" />
            <Style.Triggers>
                <Trigger Property="IsMouseOver" Value="True">
                    <Trigger.EnterActions>
                        <BeginStoryboard>
                            <Storyboard FillBehavior="HoldEnd">
                                <ColorAnimation
                                    Storyboard.TargetProperty="Background.Color"
                                    To="#007FD4"
                                    Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.EnterActions>
                    <Trigger.ExitActions>
                        <BeginStoryboard>
                            <Storyboard>
                                <ColorAnimation
                                    Storyboard.TargetProperty="Background.Color"
                                    To="Gray"
                                    Duration="0:0:0.2" />
                            </Storyboard>
                        </BeginStoryboard>
                    </Trigger.ExitActions>
                </Trigger>
            </Style.Triggers>
        </Style>

        <Style x:Key="EditTextBox" TargetType="TextBox">
            <Setter Property="TextAlignment" Value="Left" />
            <Setter Property="MinWidth" Value="50" />
            <Setter Property="FontSize" Value="14" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="Background" Value="Transparent" />
            <Setter Property="BorderThickness" Value="0" />
            <Setter Property="CaretBrush" Value="White" />
            <Setter Property="Foreground" Value="White" />
        </Style>

    </chao:BaseWindow.Resources>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="auto" />
            <RowDefinition Height="auto" />
        </Grid.RowDefinitions>

        <Grid Grid.Row="0">
            <TabControl
                x:Name="ToolsPanel"
                Height="120"
                Background="Transparent"
                ItemContainerStyle="{StaticResource FlatTabItem}"
                SelectedIndex="0"
                SelectionChanged="ToolsPanel_SelectionChanged"
                Style="{StaticResource FlatTabControl}">
                <TabItem Header="文件">
                    <StackPanel Orientation="Horizontal">
                        <chao:PathButton
                            Width="80"
                            Margin="5,5,0,5"
                            Fill="#FFE79E"
                            Path="M905.86 225.91a36.132 36.132 0 0 0-25.56-10.58H462.4l-11.65-38.71c-4.48-15.35-18.51-25.93-34.5-26.02H137.48c-9.58 0-18.78 3.81-25.56 10.58a36.132 36.132 0 0 0-10.58 25.56v650.51a36.13 36.13 0 0 0 10.58 25.57 36.16 36.16 0 0 0 25.56 10.59H880.3c9.59 0 18.78-3.81 25.56-10.59a36.155 36.155 0 0 0 10.58-25.57V251.47a36.09 36.09 0 0 0-10.58-25.56z m-45.74 111.4H157.84V306.1a36.142 36.142 0 0 1 36.14-36.14h629.99a36.142 36.142 0 0 1 36.14 36.14v31.21z"
                            Text="扫描文件夹" />
                        <chao:PathButton
                            Width="50"
                            Margin="0,5"
                            Fill="White"
                            Path="M779.636364 93.090909a128 128 0 0 1 127.906909 122.856727L907.636364 221.090909V768a128 128 0 0 1-122.856728 127.906909l-5.143272 0.093091-101.888 0.023273A92.928 92.928 0 0 1 605.090909 930.909091H209.454545a93.090909 93.090909 0 0 1-93.090909-93.090909V302.545455a93.090909 93.090909 0 0 1 93.090909-93.09091h105.239273a128 128 0 0 1 122.344727-116.270545L442.181818 93.090909h337.454546zM605.090909 279.272727H209.454545a23.272727 23.272727 0 0 0-23.109818 20.549818L186.181818 302.545455v535.272727a23.272727 23.272727 0 0 0 20.549818 23.109818L209.454545 861.090909h395.636364a23.272727 23.272727 0 0 0 23.109818-20.549818L628.363636 837.818182V302.545455a23.272727 23.272727 0 0 0-20.549818-23.109819L605.090909 279.272727z m174.545455-116.363636H442.181818a58.181818 58.181818 0 0 0-57.018182 46.545454H605.090909a93.090909 93.090909 0 0 1 93.090909 93.09091v523.636363h81.454546a58.181818 58.181818 0 0 0 58.065454-54.365091L837.818182 768V221.090909a58.181818 58.181818 0 0 0-54.365091-58.065454L779.636364 162.909091z m-232.727273 512a34.909091 34.909091 0 0 1 0 69.818182h-279.272727a34.909091 34.909091 0 0 1 0-69.818182h279.272727z m0-139.636364a34.909091 34.909091 0 0 1 0 69.818182h-279.272727a34.909091 34.909091 0 0 1 0-69.818182h279.272727z m0-139.636363a34.909091 34.909091 0 0 1 0 69.818181h-279.272727a34.909091 34.909091 0 0 1 0-69.818181h279.272727z"
                            Text="复制" />
                        <chao:PathButton
                            Width="50"
                            Margin="0,5"
                            Fill="White"
                            Path="M823.296 60.416q65.536 0 99.328 38.4t33.792 93.696l0 543.744q0 25.6-21.504 46.08l-171.008 163.84q-13.312 11.264-22.528 14.336t-23.552 3.072l-459.776 0q-23.552 0-47.104-9.728t-41.984-27.648-30.208-43.008-11.776-55.808l0-634.88q0-60.416 33.28-96.256t94.72-35.84l568.32 0zM608.256 702.464q13.312 0 22.528-9.216t9.216-22.528q0-14.336-9.216-23.04t-22.528-8.704l-320.512 0q-13.312 0-22.528 8.704t-9.216 23.04q0 13.312 9.216 22.528t22.528 9.216l320.512 0zM736.256 509.952q13.312 0 22.528-9.216t9.216-22.528-9.216-22.528-22.528-9.216l-448.512 0q-13.312 0-22.528 9.216t-9.216 22.528 9.216 22.528 22.528 9.216l448.512 0zM799.744 318.464q13.312 0 22.528-9.216t9.216-23.552q0-13.312-9.216-22.528t-22.528-9.216l-512 0q-13.312 0-22.528 9.216t-9.216 22.528q0 14.336 9.216 23.552t22.528 9.216l512 0z"
                            Text="粘贴" />

                        <StackPanel Orientation="Vertical">
                            <chao:PathButton
                                Fill="#399BE8"
                                Orientation="Horizontal"
                                Path="M472.007111 399.872a85.248 85.248 0 0 1-84.992 84.992H84.992A85.248 85.248 0 0 1 0 399.872V84.992A85.219556 85.219556 0 0 1 84.992 0h302.023111a85.248 85.248 0 0 1 84.992 84.992v314.88z m0 0M472.007111 939.036444A85.219556 85.219556 0 0 1 387.015111 1024H84.992A85.219556 85.219556 0 0 1 0 939.036444v-314.88a85.248 85.248 0 0 1 84.992-84.992h302.023111a85.248 85.248 0 0 1 84.992 84.992v314.88z m0 0M1024 399.872a85.248 85.248 0 0 1-84.992 84.992H636.956444a85.248 85.248 0 0 1-84.992-84.992V84.992A85.248 85.248 0 0 1 636.956444 0h302.051556A85.219556 85.219556 0 0 1 1024 84.992v314.88z m0 0M1024 939.036444A85.219556 85.219556 0 0 1 939.036444 1024h-302.08a85.219556 85.219556 0 0 1-84.963555-84.963556v-314.88a85.219556 85.219556 0 0 1 84.963555-84.992h302.051556a85.219556 85.219556 0 0 1 84.963556 84.992v314.88z m0 0"
                                PathHeight="15"
                                Text="全部选择"
                                TextMargin="10 0 0 0" />
                            <chao:PathButton
                                Fill="AliceBlue"
                                Orientation="Horizontal"
                                Path="M472.007111 399.872a85.248 85.248 0 0 1-84.992 84.992H84.992A85.248 85.248 0 0 1 0 399.872V84.992A85.219556 85.219556 0 0 1 84.992 0h302.023111a85.248 85.248 0 0 1 84.992 84.992v314.88z m0 0M472.007111 939.036444A85.219556 85.219556 0 0 1 387.015111 1024H84.992A85.219556 85.219556 0 0 1 0 939.036444v-314.88a85.248 85.248 0 0 1 84.992-84.992h302.023111a85.248 85.248 0 0 1 84.992 84.992v314.88z m0 0M1024 399.872a85.248 85.248 0 0 1-84.992 84.992H636.956444a85.248 85.248 0 0 1-84.992-84.992V84.992A85.248 85.248 0 0 1 636.956444 0h302.051556A85.219556 85.219556 0 0 1 1024 84.992v314.88z m0 0M1024 939.036444A85.219556 85.219556 0 0 1 939.036444 1024h-302.08a85.219556 85.219556 0 0 1-84.963555-84.963556v-314.88a85.219556 85.219556 0 0 1 84.963555-84.992h302.051556a85.219556 85.219556 0 0 1 84.963556 84.992v314.88z m0 0"
                                PathHeight="15"
                                Text="取消选择"
                                TextMargin="10 0 0 0" />
                            <chao:PathButton
                                Fill="AliceBlue"
                                Orientation="Horizontal"
                                Path="M512 967.111111a455.111111 455.111111 0 1 1 455.111111-455.111111 455.111111 455.111111 0 0 1-455.111111 455.111111zM170.666667 512a341.333333 341.333333 0 0 0 341.333333 341.333333V170.666667a341.333333 341.333333 0 0 0-341.333333 341.333333z"
                                PathHeight="15"
                                Text="反向选择"
                                TextMargin="10 0 0 0" />
                        </StackPanel>
                    </StackPanel>
                </TabItem>
                <TabItem Header="编辑">
                    <StackPanel Orientation="Horizontal">
                        <chao:PathButton
                            Width="70"
                            Margin="5,5,0,5"
                            Click="Button_Click"
                            Fill="Red"
                            Path="M687.6 96.4H336.4v91.2h351.1V96.4zM636.7 398v405.5h-73.9V398h73.9z m-175.5 0v405.5h-73.9V398h73.9z m332.1-119.2H230.7l27.9 648.8h506.7l28-648.8zM696.8 5.1c40.4 0 73.3 35.6 73.9 79.8v102.7h147.8c20.2 0 36.6 17.8 37 39.9v41.2c0 5.5-4 10-9 10.1h-70.1L848 941.6c-1.8 42.9-33.7 76.6-72.6 77.3H249.8c-39 0-71.3-33.4-73.7-76l-0.1-1.3-28.5-662.7H77.7c-5 0-9.1-4.4-9.2-9.8v-40.9c0-22.2 16.2-40.2 36.3-40.5h148.4V86.2c0-44.3 32.5-80.4 72.7-81.1h370.9z"
                            Text="清空" />
                    </StackPanel>
                </TabItem>
                <TabItem Header="重命名">
                    <WrapPanel Grid.Column="0" Orientation="Horizontal">
                        <CheckBox
                            Background="#38C550"
                            Click="ChangeExt"
                            Content="修改后缀为"
                            Foreground="White"
                            IsChecked="{Binding ChangeExt}"
                            Style="{StaticResource NormalCheckBox}"
                            Tag="White" />
                        <chao:SearchBox
                            Width="200"
                            Height="30"
                            Margin="5"
                            Padding="5,0"
                            VerticalAlignment="Top"
                            Background="Transparent"
                            BorderBrush="#326CF3"
                            BorderThickness="1"
                            Foreground="White"
                            PlaceHolder="后缀名"
                            PlaceHolderForeground="Gray"
                            ShowClearButton="True"
                            ShowSearchButton="False"
                            Text="{Binding Ext, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                    </WrapPanel>

                </TabItem>
                <TabItem Header="关于">
                    <StackPanel Margin="10" Orientation="Vertical">
                        <TextBlock
                            Margin="0,0,0,5"
                            FontSize="20"
                            Foreground="Gold"
                            Text="SuperRename" />
                        <TextBlock FontSize="10" Text="超级重命名工具" />
                        <TextBlock
                            Margin="0,5"
                            FontSize="10"
                            Text="版本：1.0" />
                    </StackPanel>
                </TabItem>

                <TabItem Header="设置" />
            </TabControl>
            <ToggleButton
                Width="30"
                Height="20"
                Margin="5"
                Padding="0,1"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Background="Transparent"
                BorderThickness="0"
                Click="TogglePanel"
                IsChecked="{Binding ExpandTogglePanel}"
                Style="{StaticResource TogglePanelButton}"
                Tag="Gray">
                <Viewbox
                    Width="auto"
                    Height="auto"
                    Margin="0,2"
                    HorizontalAlignment="Center"
                    VerticalAlignment="Center"
                    RenderTransformOrigin=".5,.5">
                    <Viewbox.RenderTransform>
                        <RotateTransform x:Name="rotateTransform" Angle="180" />
                    </Viewbox.RenderTransform>
                    <Path
                        HorizontalAlignment="Center"
                        VerticalAlignment="Center"
                        Data="M857.088 224.256q28.672-28.672 69.12-28.672t69.12 28.672q29.696 28.672 29.696 68.608t-29.696 68.608l-382.976 380.928q-12.288 14.336-30.72 19.968t-38.912 4.608-40.448-8.704-34.304-22.016l-376.832-374.784q-29.696-28.672-29.696-68.608t29.696-68.608q14.336-14.336 32.256-21.504t36.864-7.168 37.376 7.168 32.768 21.504l313.344 309.248z"
                        Fill="White" />
                </Viewbox>
            </ToggleButton>
        </Grid>

        <!--<StackPanel Orientation="Horizontal">
            <Button
                Background="#F56C6C"
                Click="Button_Click"
                Content="清空"
                Style="{StaticResource CommonButton}" />
        </StackPanel>-->

        <Grid Grid.Row="1">
            <DataGrid
                x:Name="dataGrid"
                Margin="5"
                AllowDrop="True"
                AutoGenerateColumns="False"
                Background="#1e1e1e"
                BorderThickness="2"
                CanUserAddRows="False"
                CanUserDeleteRows="True"
                CanUserResizeColumns="True"
                CanUserResizeRows="False"
                CanUserSortColumns="True"
                CellStyle="{DynamicResource DataGridCellStyle1}"
                ColumnHeaderStyle="{DynamicResource DataGridColumnHeaderStyle1}"
                DragIndicatorStyle="{DynamicResource DataGridColumnHeaderStyle2}"
                Drop="DataGrid_Drop"
                DropLocationIndicatorStyle="{DynamicResource DataGridStyle2}"
                Foreground="White"
                HorizontalGridLinesBrush="Transparent"
                IsSynchronizedWithCurrentItem="True"
                ItemsPanel="{DynamicResource ItemsPanelTemplate1}"
                ItemsSource="{Binding DataList}"
                RowHeaderStyle="{DynamicResource DataGridRowHeaderStyle1}"
                RowStyle="{DynamicResource DataGridRowStyle1}"
                ScrollViewer.HorizontalScrollBarVisibility="Disabled"
                ScrollViewer.VerticalScrollBarVisibility="Disabled"
                Style="{DynamicResource FlatDataGridStyle}"
                VerticalGridLinesBrush="Transparent"
                VerticalScrollBarVisibility="Disabled"
                Visibility="Visible">

                <DataGrid.Columns>
                    <DataGridTemplateColumn Width="auto" MinWidth="45">
                        <DataGridTemplateColumn.Header>
                            <CheckBox
                                HorizontalAlignment="Center"
                                Background="#38C550"
                                Checked="CheckBox_Checked"
                                Foreground="White"
                                IsChecked="True"
                                Style="{StaticResource NormalCheckBox}"
                                Tag="White"
                                Unchecked="CheckBox_Unchecked" />
                        </DataGridTemplateColumn.Header>
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <CheckBox
                                    HorizontalAlignment="Center"
                                    Background="#38C550"
                                    Foreground="White"
                                    IsChecked="{Binding Enable, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                                    Style="{StaticResource NormalCheckBox}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>


                    <DataGridTemplateColumn
                        Width="auto"
                        MinWidth="40"
                        Header="序号">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox
                                    Foreground="White"
                                    Style="{StaticResource ReadOnlyTextBox}"
                                    Text="{Binding RelativeSource={RelativeSource AncestorType=DataGridRow}, Converter={local:RowToIndexConverter}, Mode=OneWay}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>



                    <DataGridTemplateColumn
                        Width="150"
                        MinWidth="100"
                        Header="原名">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox
                                    Foreground="White"
                                    Style="{StaticResource ReadOnlyTextBox}"
                                    Text="{Binding Source, Mode=OneWay}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>

                    <!--<DataGridTextColumn
                        Width="SizeToCells"
                        Binding="{Binding Target, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                        Header="目标名" />-->

                    <DataGridTemplateColumn
                        Width="150"
                        MinWidth="800"
                        Header="目标名">
                        <DataGridTemplateColumn.CellTemplate>
                            <DataTemplate>
                                <TextBox
                                    Name="tb"
                                    Style="{StaticResource EditTextBox}"
                                    Text="{Binding Target, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                            </DataTemplate>
                        </DataGridTemplateColumn.CellTemplate>
                    </DataGridTemplateColumn>



                </DataGrid.Columns>


            </DataGrid>

            <TextBlock
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="20"
                Text="拖入文件"
                Visibility="{Binding ShowDragHint}" />
        </Grid>


        <Button
            Grid.Row="2"
            HorizontalAlignment="Right"
            VerticalAlignment="Bottom"
            Click="BeginChangeName"
            Content="执行"
            Style="{StaticResource CommonButton}" />
    </Grid>
</chao:BaseWindow>
